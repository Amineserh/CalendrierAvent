<Window x:Class="CalendrierAvent.MainWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       Title="Calendrier de l'Avent"
       WindowStartupLocation="CenterScreen"
       ResizeMode="NoResize"
       Width="1280" Height="720"
       Background="#000000"
       Loaded="Window_Loaded">
    <!-- 🎬 ANIMATIONS -->
    <Window.Resources>
        <!-- Animation d'apparition du titre + date : fondu + léger zoom -->
        <Storyboard x:Key="TitleAppearStoryboard">
            <!-- Opacité -->
            <DoubleAnimation Storyboard.TargetName="TitlePanel"
                            Storyboard.TargetProperty="Opacity"
                            From="0" To="1"
                            Duration="0:0:1.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <!-- Zoom X -->
            <DoubleAnimation Storyboard.TargetName="TitleScale"
                            Storyboard.TargetProperty="ScaleX"
                            From="0.9" To="1"
                            Duration="0:0:1.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <!-- Zoom Y -->
            <DoubleAnimation Storyboard.TargetName="TitleScale"
                            Storyboard.TargetProperty="ScaleY"
                            From="0.9" To="1"
                            Duration="0:0:1.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>
    <Grid Background="#000000">
        <!-- ========= ÉCRAN VIDÉO ========= -->
        <Grid x:Name="IntroGrid">
            <MediaElement x:Name="IntroVideo"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         Margin="40"
                         Stretch="UniformToFill"
                         LoadedBehavior="Manual"
                         UnloadedBehavior="Stop"
                         MediaFailed="IntroVideo_MediaFailed"
                         MediaEnded="IntroVideo_MediaEnded" />
            <!-- BOUTON SKIP (ouvre la popup pour le prénom) -->
            <Border HorizontalAlignment="Right"
                   VerticalAlignment="Top"
                   Margin="0,20,20,0"
                   Background="#AA000000"
                   Padding="0">
                <Button x:Name="SkipButton"
                       Content="Skip"
                       Width="120"
                       Height="45"
                       Background="Transparent"
                       Foreground="White"
                       FontSize="18"
                       BorderThickness="0"
                       Opacity="0.85"
                       Click="SkipButton_Click" />
            </Border>
            <!-- POPUP DEMANDE DE PRÉNOM -->
            <Grid x:Name="NamePopup"
                 Background="#80000000"
                 Visibility="Collapsed">
                <Border Background="White"
                       Padding="20"
                       Width="450"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                    <StackPanel>
                        <TextBlock Text="Ho ho ho... qui est là ?"
                                  FontSize="26"
                                  FontWeight="Bold"
                                  Margin="0,0,0,10"
                                  TextAlignment="Center" />
                        <TextBlock Text="Entre ton prénom pour continuer ✨"
                                  FontSize="16"
                                  Margin="0,0,0,15"
                                  TextAlignment="Center" />
                        <TextBox x:Name="NameTextBox"
                                FontSize="18"
                                Margin="0,0,0,15"
                                HorizontalAlignment="Stretch" />
                        <Button Content="Valider"
                               Width="130"
                               Height="40"
                               HorizontalAlignment="Center"
                               Background="#CC1A1A"
                               Foreground="White"
                               FontSize="18"
                               BorderThickness="0"
                               Click="ConfirmNameButton_Click" />
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
        <!-- ========= ÉCRAN PORTE ========= -->
        <Grid x:Name="DoorGrid"
             Visibility="Collapsed">
            <!-- Image de la porte -->
            <Image x:Name="DoorImage"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Stretch"
                  Stretch="UniformToFill" />
            <!-- Bouton pour entrer -->
            <Button x:Name="EnterButton"
                   Content="Entrer"
                   Width="2000"
                   Height="600"
                   FontSize="24"
                   FontWeight="Bold"
                   BorderThickness="0"
                   Opacity="0"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Click="EnterButton_Click" />
        </Grid>
        <!-- ========= SECONDE PAGE (NOUVELLE VIDÉO) ========= -->
        <Grid x:Name="NextPageGrid"
             Background="Black"
             Visibility="Collapsed">
            <MediaElement x:Name="NextVideo"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         Stretch="UniformToFill"
                         LoadedBehavior="Manual"
                         UnloadedBehavior="Stop" />
            <TextBlock x:Name="NextPageText"
                      Text="Nouvelle page en préparation..."
                      Foreground="White"
                      FontSize="32"
                      FontWeight="Bold"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      TextAlignment="Center"
                      Opacity="0.7" />
        </Grid>
        <!-- ========= TITRE + DATE (PAR-DESSUS TOUT) ========= -->
        <StackPanel x:Name="TitlePanel"
                   VerticalAlignment="Top"
                   HorizontalAlignment="Center"
                   Margin="0,20,0,0"
                   Opacity="0"
                   RenderTransformOrigin="0.5,0.5">
            <StackPanel.RenderTransform>
                <ScaleTransform x:Name="TitleScale" ScaleX="0.9" ScaleY="0.9"/>
            </StackPanel.RenderTransform>
            <TextBlock x:Name="TitleText"
                      Text=""
                      FontSize="50"
                      FontWeight="Bold"
                      Foreground="#FFE53935"
                      TextAlignment="Center"
                      FontFamily="Segoe UI Black">
                <TextBlock.Effect>
                    <DropShadowEffect Color="Black"
                                     BlurRadius="10"
                                     ShadowDepth="0"
                                     Opacity="0.7"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBlock x:Name="DateText"
                      Margin="0,10,0,0"
                      Text=""
                      FontSize="28"
                      FontWeight="SemiBold"
                      Foreground="#FFFFD54F"
                      TextAlignment="Center"
                      FontFamily="Segoe UI Semibold">
                <TextBlock.Effect>
                    <DropShadowEffect Color="Black"
                                     BlurRadius="6"
                                     ShadowDepth="0"
                                     Opacity="0.6"/>
                </TextBlock.Effect>
            </TextBlock>
        </StackPanel>
    </Grid>
</Window>